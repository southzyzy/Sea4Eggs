###################################
##### Default Configurations ######
###################################
en
conf t
hostname L3_SW2

########################
##### Disable CDP ######
########################
no cdp run

###################################
##### Set logging level to 6 ######
###################################
logging 172.16.67.2
logging trap 6
logging source-interface g0/0 vrf Mgmt-vrf

#######################
##### Config NTP ######
#######################
clock timezone SGT 8
ntp server 172.16.67.2 prefer
ntp logging

#############################
##### Enable IP Routing #####
#############################
ip routing

########################
##### Create VLANs #####
########################
vlan 100
name Partners
exit

vlan 110
name Asscioate
exit

vlan 200
name "Law Clerks"
exit

vlan 210
name "Legal Secretary"
exit

vlan 300
name "IT Support"
exit

vlan 310
name Marketing
exit

vlan 37
name CLO
exit

vlan 66
name "Internal Servers"
exit

#######################
##### Create SVIs #####
#######################
int vlan 37
ip address 172.16.37.2 255.255.255.248
ip helper-address 172.16.66.3
standby version 2
standby ip 172.16.37.6
no shut
exit

int vlan 66
ip address 172.16.66.2 255.255.255.248
ip helper-address 172.16.66.3
standby version 2
standby ip 172.16.66.6
no shut
exit

int vlan 100
ip address 172.16.100.2 255.255.255.248
ip helper-address 172.16.66.3
standby version 2
standby ip 172.16.100.6
no shut
exit

int vlan 110
ip address 172.16.110.2 255.255.255.240
ip helper-address 172.16.66.3
standby version 2
standby ip 172.16.110.14
no shut
exit

int vlan 200
ip address 172.16.200.2 255.255.255.248
ip helper-address 172.16.66.3
standby version 2
standby ip 172.16.200.6
no shut
exit

int vlan 210
ip address 172.16.210.2 255.255.255.224
ip helper-address 172.16.66.3
standby version 2
standby ip 172.16.210.30
standby priority 150
standby preempt
no shut
exit

int vlan 300
ip address 172.16.30.2 255.255.255.248
ip helper-address 172.16.66.3
standby version 2
standby ip 172.16.30.6
no shut
exit

int vlan 310
ip address 172.16.31.2 255.255.255.248
ip helper-address 172.16.66.3
standby version 2
standby ip 172.16.31.6
no shut
exit

######################################
##### Configure port to firewall #####
######################################
int g1/0/3
no switchport
ip address 172.16.2.2 255.255.255.252
no shut

#############################################
##### Configure port to ACCESS-SWITCHES #####
#############################################
int g1/0/1
switchport mode trunk
switchport trunk allowed vlan 100,110,200,300,310,37,66
no shut
exit

int g1/0/2
switchport mode access
switchport access vlan 210
no shut
exit

###########################
##### Option-82 Trust #####
###########################
ip dhcp relay information trust-all

##########################
##### Enable Tacacs+ #####
##########################
aaa new-model
aaa group server tacacs+ TACACSERVER
server-private 172.16.68.8 key Sea4EggsC0mpl3xP@ssw0rd
ip vrf forwarding Mgmt-vrf
exit
ip tacacs source-interface g0/0
aaa authentication login default group TACACSERVER local

###############################
##### Test authentication #####
###############################
test aaa group TACACSERVER network_manager Rapes&Redwine legacy

##########################################
##### Enable privilege mode password #####
##########################################
enable algorithm-type sha256 secret C0mpl3xP@ssw0rd

###########################################################
##### Create TACACS+ account for local authentication #####
###########################################################
username network_manager privilege 15 algorithm-type sha256 secret Rapes&Redwine

########################################################
##### Create local account for local authentication ####
######### Do not use unless absolutely required ########
########################################################
username sea4eggs-admin privilege 15 algorithm-type sha256 secret 1qwer$#@!~sea4eggs

##########################################
##### Enable ssh on virtual terminal #####
##########################################
line vty 0 15 
transport input ssh
login authentication default
exit

######################
##### Enable SSH #####
######################
ip domain-name sea4eggs.sitict
crypto key generate rsa modulus 2048
ip ssh version 2


##### Default Route #####
ip route 0.0.0.0 0.0.0.0 172.16.2.1

! TODO ACL
!	- ACLs
!	- Static Routes
!	- ACL on int G0/0 on R2 to allow SSH from Management VLAN only

end
