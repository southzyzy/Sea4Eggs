##############################
##### Configure Hostname #####
##############################
en
conf t
hostname ACCESS-SW1

#######################
##### disable CDP #####
#######################
no cdp run

###############################
##### Disable HTTP server #####
###############################
no ip http server
no ip http secure-server

#######################
##### Config NTP ######
#######################
clock timezone SGT 8
ntp server 172.16.67.2 prefer
ntp logging

###################################
##### Set logging level to 6 ######
###################################
logging 172.16.67.2
logging trap 6

###########################
##### Configure VLANS #####
###########################
vlan 100
name Partners
exit

vlan 110
name Associate
exit

vlan 200
name "Law Clerks"
exit

vlan 300
name "IT Support"
exit

vlan 310
name Marketing
exit

vlan 37
name CLO
exit

vlan 66
name "Internal Servers"
exit

#############################################
##### add ip address to MANAGEMENT VLAN #####
#############################################
int vlan 68
description MANAGEMENT
ip address 172.16.68.6 255.255.255.240
exit

################################
##### Enable port security #####
################################
int range fa0/1-23
switchport mode access
switchport nonegotiate
switchport port-security 
switchport port-security violation shutdown
switchport port-security maximum 1
switchport port-security mac-address sticky
spanning-tree bpduguard enable
spanning-tree portfast
shut
exit

#################################
##### Configure trunk to L3 #####
#################################
int range g0/1-2
switchport mode trunk
switchport nonegotiate
switchport trunk allowed vlan 37,66,100,110,200,300,310
no shut
exit

######################################################
##### Configure access ports for different VLANs #####
######################################################
# Partners 2
int range fa0/1-2
switchport access vlan 100
no shut
exit

# Associate 5
int range fa0/3-7
switchport access vlan 110
no shut
exit

# Law Clerks 3
int range fa0/8-10
switchport access vlan 200
no shut
exit

# IT Support 3
int range fa0/11-13
switchport access vlan 300
no shut
exit

# Marketing 1
int range fa0/14
switchport access vlan 310
no shut
exit

# CLO 2
int range fa0/15-16
switchport access vlan 37
no shut
exit

# Internal Servers
int range fa0/17-19
switchport access vlan 66
no shut
exit

###################################
##### Configure DHCP snooping #####
###################################
ip dhcp snooping
ip dhcp snooping vlan 37,66,100,110,200,300,310
ip arp inspection vlan 37,66,100,110,200,300,310
ip dhcp snooping verify mac-address

######################################################
##### Set dhcp snooping and DAI inspection limit #####
######################################################
int range fa0/1-23
ip dhcp snooping limit rate 25
ip arp inspection limit rate 100
exit

int range g0/1-2
ip dhcp snooping trust
ip arp inspection trust
exit

#############################################
##### Set Snooping Trust to DHCP Server #####
#############################################
int fa0/17
ip dhcp snooping trust
ip arp inspection trust
exit

##########################################
##### Validate ARP Reply matching L2 #####
##########################################
ip arp inspection validate src-mac dst-mac ip

########################################
##### Set IPSG, with ip-mac filter #####
########################################
int range fa0/1-23
ip verify source port-security
exit

############################
##### Creating SSH Key #####
############################
ip domain-name sea4eggs.sitict
crypto key generate rsa modulus 2048
ip ssh version 2

##########################
##### Enable TACACS+ #####
##########################
aaa new-model
tacacs server TACACSERVER
address ipv4 172.16.68.8
key Sea4EggsC0mpl3xP@ssw0rd
exit
ip tacacs source-interface fa0/24
aaa authentication login default group tacacs+ local

###############################
##### Test authentication #####
###############################
test aaa group tacacs+ network_manager Rapes&Redwine legacy

##########################################
##### Enable privilege mode password #####
##########################################
enable algorithm-type sha256 secret SW1C0mpl3xP@ssw0rd

###########################################################
##### Create TACACS+ account for local authentication #####
###########################################################
username network_manager privilege 15 algorithm-type sha256 secret Rapes&Redwine

########################################################
##### Create local account for local authentication ####
######### Do not use unless absolutely required ########
########################################################
username sea4eggs-admin privilege 15 algorithm-type sha256 secret 1qwer$#@!~sea4eggs

##########################################
##### Enable ssh on virtual terminal #####
##########################################
line vty 0 15 
transport input ssh
login authentication default
exit

##############################
##### Set STP Uplinkfast #####
##############################
spanning-tree uplinkfast

end
